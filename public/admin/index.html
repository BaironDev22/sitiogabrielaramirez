<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin - SexoloGabi</title>
</head>
<body>
  <!-- Include the script that builds the page and powers Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script>
    // Esperar a que el CMS esté listo
    CMS.registerPreviewTemplate('blog', function BlogPostPreview(props) {
      const { entry, widgetFor } = props;
      const data = entry.getIn(['data']).toJS();
      
      // Crear elementos de manera segura
      const container = document.createElement('div');
      container.style.cssText = `
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        line-height: 1.6;
        color: #333;
      `;
      
      // Título
      const title = document.createElement('h1');
      title.textContent = data.title || 'Sin título';
      title.style.cssText = `
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        color: #1a1a1a;
      `;
      
      // Meta información
      const meta = document.createElement('div');
      meta.style.cssText = `
        display: flex;
        gap: 1rem;
        margin-bottom: 1.5rem;
        font-size: 0.9rem;
        color: #666;
      `;
      
      const author = document.createElement('span');
      author.textContent = `Por ${data.author || 'Gabriela Ramírez'}`;
      
      const separator = document.createElement('span');
      separator.textContent = '•';
      
      const category = document.createElement('span');
      category.textContent = data.category || '';
      category.style.cssText = `
        background: #f0f0f0;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 500;
      `;
      
      meta.appendChild(author);
      meta.appendChild(separator);
      meta.appendChild(category);
      
      // Descripción
      const description = document.createElement('p');
      description.textContent = data.description || '';
      description.style.cssText = `
        font-size: 1.2rem;
        color: #555;
        margin-bottom: 2rem;
        font-style: italic;
      `;
      
      // Imagen
      let imageEl = null;
      if (data.image) {
        imageEl = document.createElement('img');
        imageEl.src = data.image;
        imageEl.style.cssText = `
          width: 100%;
          height: 300px;
          object-fit: cover;
          border-radius: 8px;
          margin-bottom: 2rem;
        `;
      }
      
      // Contenido del cuerpo
      const bodyContent = document.createElement('div');
      bodyContent.style.cssText = `
        font-size: 1.1rem;
        line-height: 1.7;
      `;
      
      // Agregar elementos al contenedor
      container.appendChild(title);
      container.appendChild(meta);
      container.appendChild(description);
      if (imageEl) container.appendChild(imageEl);
      container.appendChild(bodyContent);
      
      // Agregar contenido markdown
      if (widgetFor && typeof widgetFor === 'function') {
        try {
          const bodyWidget = widgetFor('body');
          if (bodyWidget && bodyWidget.props) {
            bodyContent.innerHTML = bodyWidget.props.value || data.body || '';
          }
        } catch (e) {
          bodyContent.textContent = data.body || 'Contenido del artículo...';
        }
      } else {
        bodyContent.textContent = data.body || 'Contenido del artículo...';
      }
      
      return container;
    });
    
    // Configuración simple del CMS
    CMS.init();
  </script>
</body>
</html>
